# NAQ Configuration - Development Environment
# Generated by NAQ CLI
#
# This configuration is optimized for local development with:
# - Debug logging enabled
# - Reduced worker concurrency
# - Fast event batching for quick feedback
# - Local NATS server

nats:
  servers:
    - ${NAQ_NATS_URL:nats://localhost:4222}
  client_name: naq-dev-client
  max_reconnect_attempts: 5
  reconnect_time_wait: 2.0
  connection_timeout: 10.0
  drain_timeout: 30.0
  flush_timeout: 5.0
  ping_interval: 120.0
  max_outstanding_pings: 2
  auth: null
  tls:
    enabled: false
    cert_file: null
    key_file: null
    ca_file: null

queues:
  default: dev_queue
  prefix: naq_dev
  configs: {}

workers:
  concurrency: 2  # Low concurrency for development
  heartbeat_interval: 15
  ttl: 60
  max_job_duration: 3600
  shutdown_timeout: 30
  pools: {}

scheduler:
  enabled: true
  lock_ttl: 30
  lock_renew_interval: 15
  max_failures: 3  # Fail fast in development
  scan_interval: 1.0

events:
  enabled: true
  batch_size: 10  # Small batches for quick feedback
  flush_interval: 2.0  # Fast flushing
  max_buffer_size: 1000
  storage_url: null  # Use main NATS URL
  subject_prefix: naq.dev.jobs.events
  stream:
    name: NAQ_DEV_JOB_EVENTS
    max_age: "24h"  # Shorter retention for development
    max_bytes: "100MB"
    replicas: 1
  filters:
    exclude_heartbeats: false  # Include all events for debugging
    min_job_duration: 0

results:
  ttl: 86400  # 1 day (shorter for development)
  cleanup_interval: 3600
  kv_bucket: naq_dev_results

serialization:
  job_serializer: pickle
  compression: false
  json:
    encoder: json.JSONEncoder
    decoder: json.JSONDecoder

logging:
  level: DEBUG  # Verbose logging for development
  format: text  # Human-readable format
  file: null  # Log to stdout
  max_size: 10MB
  backup_count: 3
  to_file_enabled: false

environments:
  development:
    name: development
    overrides:
      logging.level: DEBUG
      events.batch_size: 10
      workers.concurrency: 2
      events.filters.exclude_heartbeats: false
      
  testing:
    name: testing
    overrides:
      logging.level: WARNING
      events.enabled: false
      scheduler.enabled: false
      workers.concurrency: 1